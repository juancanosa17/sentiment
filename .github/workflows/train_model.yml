# üìÅ .github/workflows/train_model.yml

name: Entrenar Modelo de Sentimientos (Fine-Tuning)

# Define el disparador (trigger) del workflow
on:
  # Habilita la ejecuci√≥n manual desde la pesta√±a "Actions" de GitHub
  workflow_dispatch:

jobs:
  fine-tune-model:
    runs-on: ubuntu-latest
    
    steps:
      # Paso 1: Clona tu repositorio para tener acceso a los scripts y al dataset
      - name: Checkout del c√≥digo
        uses: actions/checkout@v4

      # Paso 2: Configura el entorno de Python
      - name: Configurar Python 3.10
        uses: actions/setup-python@v5
        with:
          python-version: '3.10'

      # Paso 3: Instala todas las dependencias necesarias
      - name: Instalar dependencias
        run: |
          python -m pip install --upgrade pip
          pip install -r requirements.txt

      # Paso 4: Ejecuta el script de fine-tuning (esto puede tardar)
      - name: Ejecutar fine-tuning
        run: python scripts/02_fine_tuning.py

      # Paso 5: ¬°CRUCIAL! Sube la carpeta del modelo como un artefacto
      - name: Guardar modelo afinado como artefacto
        uses: actions/upload-artifact@v4
        with:
          name: modelo-afinad-artifact # Nombre del archivo ZIP que podr√°s descargar
          path: ./modelo_afinad/      # La carpeta que se va a comprimir y subir
